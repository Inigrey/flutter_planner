# Flutter Planner

[![style: very good analysis][very_good_analysis_badge]][very_good_analysis_link]
[![License: MIT][license_badge]][license_link]

Generated by the [Very Good CLI][very_good_cli_link] ðŸ¤–

A Flutter application to plan personal activities and routines that uses [Supabase](https://supabase.com/) for the backend.

## Screenshots
<img src="screenshots/planner.png" height="300">
<img src="screenshots/schedule.png" height="300">

---
## Features

- Responsive ui, tested on android and windows.
- Calendar and timeline view for daily activities.
- Timetable for weekly routines.
- Email authentication

---
## Set up

### Supabase

1. Create a new project.
2. Create a new table, named routines with the following rows (RLS enable).
    | Name       | Type | Extra       | Other                                  |
    | ---------- | ---- | ----------- | -------------------------------------- |
    | id         | int8 | Is identity | -                                      |
    | user_id    | uuid | Is nullable | Foreign key (table: users, column: id) |
    | name       | text | -           | -                                      |
    | day        | int2 | -           | -                                      |
    | start_time | time | -           | -                                      |
    | end_time   | time | -           | -                                      |

3. Create a new table, named 'activities', with the following rows (RLS enable).

   | Name        | Type | Extra                        | Other                                     |
   | ----------- | ---- | ---------------------------- | ----------------------------------------- |
   | id          | int8 | Is identity                  | -                                         |
   | user_id     | uuid | Is nullable                  | Foreign key (table: users, column: id)    |
   | name        | text | Is nullable                  | -                                         |
   | type        | int2 | -                            | Default value: 0                          |
   | date        | date | -                            | -                                         |
   | start_time  | time | -                            | -                                         |
   | end_time    | time | -                            | -                                         |
   | description | text | Is nullable                  | -                                         |
   | links       | text | Is nullable, define as array | -                                         |
   | routine_id  | int8 | Is nullable                  | Foreign key (table: routines, column: id) |
   
4. Create a new policy for both tables.
   - Allowed operation: ALL.
   - USING expression: auth.uid() = user_id.
   - WITH CHECK expression: (role() = 'authenticated'::text).
5. In authentication settings, disable email confirmations.
   
### Flutter

1. Clone this repo.
2. In the root directory, create a new file named '.env' with the following lines.
``` env
SUPABASE_URL=<YOUR_URL>
SUPABASE_ANON_KEY=<YOUR_KEY>
```
3. Run the desired flavor (for the moment all are the same).
```sh
# Development
$ flutter run --flavor development --target lib/main_development.dart

# Staging
$ flutter run --flavor staging --target lib/main_staging.dart

# Production
$ flutter run --flavor production --target lib/main_production.dart
```

_\*Flutter Planner works on iOS, Android, Web, and Windows._

---

## Dependencies

- [flutter_bloc](https://pub.dev/packages/flutter_bloc)
- [supabase_flutter](https://pub.dev/packages/supabase_flutter)
- [go_router](https://pub.dev/packages/go_router)


[coverage_badge]: coverage_badge.svg
[flutter_localizations_link]: https://api.flutter.dev/flutter/flutter_localizations/flutter_localizations-library.html
[internationalization_link]: https://flutter.dev/docs/development/accessibility-and-localization/internationalization
[license_badge]: https://img.shields.io/badge/license-MIT-blue.svg
[license_link]: https://opensource.org/licenses/MIT
[very_good_analysis_badge]: https://img.shields.io/badge/style-very_good_analysis-B22C89.svg
[very_good_analysis_link]: https://pub.dev/packages/very_good_analysis
[very_good_cli_link]: https://github.com/VeryGoodOpenSource/very_good_cli
